USE [SIC]
GO

CREATE TABLE LUPEON_NFE (
  ID                INT NOT NULL IDENTITY PRIMARY KEY,
  EMBARCADOR        VARCHAR(14) NOT NULL,
  NUMERO            VARCHAR(20) NOT NULL,
  SERIE             VARCHAR(10),
  CHAVE             VARCHAR(44),
  DT_EMISSAO        DATETIME NOT NULL,
  DT_EMBARQUE       DATETIME,
  DT_CHEGADA        DATETIME,
  DT_ENTREGA        DATETIME,
  DT_PREVISAO       DATETIME,
  DT_PREV_ORIGINAL  DATETIME,
  DT_AGENDAMENTO    DATETIME,
  VALOR             NUMERIC,
  CTRC              VARCHAR(20) NOT NULL,
  CTRC_OLD          VARCHAR(20),
  DESTINATARIO      VARCHAR(14) NOT NULL,
  TRANSPORTADOR     VARCHAR(14) NOT NULL,
  FLAG_COMPROVANTE  INT NOT NULL DEFAULT 0,
  JSON_COMPROVANTE  NVARCHAR(MAX),
  DT_UPDATE         DATETIME DEFAULT CURRENT_TIMESTAMP,
  CdEmpresa         INT,
  NrSeqControle     BIGINT,
  FASE_ID           INT NOT NULL DEFAULT 0,
  VER_ID            INT NOT NULL DEFAULT 1,
  BASE_CNPJ         VARCHAR(14)
);

CREATE INDEX IDX_LUPEON_NFE_CHAVE  ON LUPEON_NFE (CHAVE);
CREATE INDEX IDX_LUPEON_NFE_NF     ON LUPEON_NFE (EMBARCADOR,NUMERO,SERIE);
CREATE INDEX IDX_LUPEON_NFE_CTRC   ON LUPEON_NFE (CTRC);
CREATE INDEX IDX_LUPEON_NFE_SENIOR ON LUPEON_NFE (CdEmpresa,NrSeqControle);
